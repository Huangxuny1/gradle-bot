{
  "action":"edited",
  "changes":{
    "body":{
      "from":"what could be a little bit custom here is that the relationship between tasks is assigned in phase `gradle.projectsEvaluated`. When I change my plugin code a little bit and now `dependsOn` is set when first build script is evaluated, the issue is also gone."
    }
  },
  "issue":{
    "url":"https://api.github.com/repos/gradle/gradle/issues/12677",
    "repository_url":"https://api.github.com/repos/gradle/gradle",
    "labels_url":"https://api.github.com/repos/gradle/gradle/issues/12677/labels{/name}",
    "comments_url":"https://api.github.com/repos/gradle/gradle/issues/12677/comments",
    "events_url":"https://api.github.com/repos/gradle/gradle/issues/12677/events",
    "html_url":"https://github.com/gradle/gradle/issues/12677",
    "id":590525129,
    "node_id":"MDU6SXNzdWU1OTA1MjUxMjk=",
    "number":12677,
    "title":"Provider API regression 6.2.1 -> 6.3",
    "user":{
      "login":"pun-ky",
      "id":10673561,
      "node_id":"MDQ6VXNlcjEwNjczNTYx",
      "avatar_url":"https://avatars0.githubusercontent.com/u/10673561?v=4",
      "gravatar_id":"",
      "url":"https://api.github.com/users/pun-ky",
      "html_url":"https://github.com/pun-ky",
      "followers_url":"https://api.github.com/users/pun-ky/followers",
      "following_url":"https://api.github.com/users/pun-ky/following{/other_user}",
      "gists_url":"https://api.github.com/users/pun-ky/gists{/gist_id}",
      "starred_url":"https://api.github.com/users/pun-ky/starred{/owner}{/repo}",
      "subscriptions_url":"https://api.github.com/users/pun-ky/subscriptions",
      "organizations_url":"https://api.github.com/users/pun-ky/orgs",
      "repos_url":"https://api.github.com/users/pun-ky/repos",
      "events_url":"https://api.github.com/users/pun-ky/events{/privacy}",
      "received_events_url":"https://api.github.com/users/pun-ky/received_events",
      "type":"User",
      "site_admin":false
    },
    "labels":[
      {
        "id":460356597,
        "node_id":"MDU6TGFiZWw0NjAzNTY1OTc=",
        "url":"https://api.github.com/repos/gradle/gradle/labels/a:bug",
        "name":"a:bug",
        "color":"d93f0b",
        "default":false,
        "description":null
      },
      {
        "id":478384995,
        "node_id":"MDU6TGFiZWw0NzgzODQ5OTU=",
        "url":"https://api.github.com/repos/gradle/gradle/labels/from:contributor",
        "name":"from:contributor",
        "color":"0052cc",
        "default":false,
        "description":null
      }
    ],
    "state":"open",
    "locked":false,
    "assignee":null,
    "assignees":[

    ],
    "milestone":null,
    "comments":2,
    "created_at":"2020-03-30T19:11:49Z",
    "updated_at":"2020-03-31T06:30:38Z",
    "closed_at":null,
    "author_association":"NONE",
    "body":"<!--- \r\nPlease follow the instructions below. \r\nWe receive dozens of issues every week, so to stay productive, we will close issues that don't provide enough information. \r\n\r\nPlease open Android-related issues on the Android Issue Tracker at https://source.android.com/source/report-bugs\r\nPlease open Gradle Native-related issues at https://github.com/gradle/gradle-native/issues\r\n-->\r\n\r\n<!--- Provide a brief summary of the issue in the title above -->\r\n\r\n### Expected Behavior\r\n\r\nBuild working after upgrading from 6.2.1 to 6.3\r\n\r\n### Current Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\n\r\nhttps://github.com/Cognifide/gradle-aem-plugin/issues/667#issue-590445484\r\n\r\n```\r\nCaused by: java.lang.UnsupportedOperationException: Should not be called\r\n        at org.gradle.api.internal.provider.AbstractProperty$FinalizedValue.finalState(AbstractProperty.java:407)\r\n        at org.gradle.api.internal.provider.AbstractProperty.beforeRead(AbstractProperty.java:195)\r\n        at org.gradle.api.internal.provider.AbstractProperty.calculateOwnValue(AbstractProperty.java:103)\r\n        at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:109)\r\n        at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:68)\r\n        at org.gradle.api.internal.provider.AbstractMinimalProvider.get(AbstractMinimalProvider.java:80)\r\n        at com.cognifide.gradle.aem.pkg.tasks.PackageCompose$fromArchive$1.invoke(PackageCompose.kt:154)\r\n        at com.cognifide.gradle.aem.pkg.tasks.PackageCompose$fromArchive$1.invoke(PackageCompose.kt:23)\r\n        at com.cognifide.gradle.common.build.ObjectFactory$sam$java_util_concurrent_Callable$0.call(ObjectFactory.kt)\r\n        at org.gradle.api.internal.provider.DefaultProvider.calculateOwnValue(DefaultProvider.java:66)\r\n\r\n```\r\n\r\n### Context\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\nCustom plugin user reported an [issue](https://github.com/Cognifide/gradle-aem-plugin/issues/667) when using recent version of Gradle.\r\nI checked that the issue only occurs on Gradle 6.3\r\n\r\n### Steps to Reproduce \r\n<!--- Provide a self-contained example project (as an attached archive or a Github project). -->\r\n<!--- In the rare cases where this is infeasible, we will also accept a detailed set of instructions. -->\r\n\r\nhttps://github.com/sabberworm/gradle-aem-plugin-multi-project-issue-reproducible-example\r\nBuild via command `sh gradlew packageCompose` - it will fail (the issue visible).\r\n\r\nThen change Gradle version in wrapper properties file from 6.3 to 6.2.1, repeat.build command - issue is gone.\r\n\r\n### Your Environment\r\n<!--- Include as many relevant details about the environment you experienced the bug in -->\r\n<!--- A build scan https://scans.gradle.com/get-started is ideal -->\r\n\r\n------------------------------------------------------------\r\nGradle 6.3\r\n------------------------------------------------------------\r\n\r\nBuild time:   2020-03-24 19:52:07 UTC\r\nRevision:     bacd40b727b0130eeac8855ae3f9fd9a0b207c60\r\n\r\nKotlin:       1.3.70\r\nGroovy:       2.5.10\r\nAnt:          Apache Ant(TM) version 1.10.7 compiled on September 1 2019\r\nJVM:          1.8.0_242 (AdoptOpenJDK 25.242-b08)\r\nOS:           Mac OS X 10.15.3 x86_64\r\n\r\n\r\n\r\n"
  },
  "comment":{
    "url":"https://api.github.com/repos/gradle/gradle/issues/comments/606428021",
    "html_url":"https://github.com/gradle/gradle/issues/12677#issuecomment-606428021",
    "issue_url":"https://api.github.com/repos/gradle/gradle/issues/12677",
    "id":606428021,
    "node_id":"MDEyOklzc3VlQ29tbWVudDYwNjQyODAyMQ==",
    "user":{
      "login":"pun-ky",
      "id":10673561,
      "node_id":"MDQ6VXNlcjEwNjczNTYx",
      "avatar_url":"https://avatars0.githubusercontent.com/u/10673561?v=4",
      "gravatar_id":"",
      "url":"https://api.github.com/users/pun-ky",
      "html_url":"https://github.com/pun-ky",
      "followers_url":"https://api.github.com/users/pun-ky/followers",
      "following_url":"https://api.github.com/users/pun-ky/following{/other_user}",
      "gists_url":"https://api.github.com/users/pun-ky/gists{/gist_id}",
      "starred_url":"https://api.github.com/users/pun-ky/starred{/owner}{/repo}",
      "subscriptions_url":"https://api.github.com/users/pun-ky/subscriptions",
      "organizations_url":"https://api.github.com/users/pun-ky/orgs",
      "repos_url":"https://api.github.com/users/pun-ky/repos",
      "events_url":"https://api.github.com/users/pun-ky/events{/privacy}",
      "received_events_url":"https://api.github.com/users/pun-ky/received_events",
      "type":"User",
      "site_admin":false
    },
    "created_at":"2020-03-31T06:30:26Z",
    "updated_at":"2020-03-31T06:30:38Z",
    "author_association":"NONE",
    "body":"what could be a little bit custom here is that the relationship between tasks is assigned in phase `gradle.projectsEvaluated`. When I changed my plugin code a little bit and now `dependsOn` is set when first build script is evaluated, the issue is also gone."
  },
  "repository":{
    "id":302322,
    "node_id":"MDEwOlJlcG9zaXRvcnkzMDIzMjI=",
    "name":"gradle",
    "full_name":"gradle/gradle",
    "private":false,
    "owner":{
      "login":"gradle",
      "id":124156,
      "node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNDE1Ng==",
      "avatar_url":"https://avatars2.githubusercontent.com/u/124156?v=4",
      "gravatar_id":"",
      "url":"https://api.github.com/users/gradle",
      "html_url":"https://github.com/gradle",
      "followers_url":"https://api.github.com/users/gradle/followers",
      "following_url":"https://api.github.com/users/gradle/following{/other_user}",
      "gists_url":"https://api.github.com/users/gradle/gists{/gist_id}",
      "starred_url":"https://api.github.com/users/gradle/starred{/owner}{/repo}",
      "subscriptions_url":"https://api.github.com/users/gradle/subscriptions",
      "organizations_url":"https://api.github.com/users/gradle/orgs",
      "repos_url":"https://api.github.com/users/gradle/repos",
      "events_url":"https://api.github.com/users/gradle/events{/privacy}",
      "received_events_url":"https://api.github.com/users/gradle/received_events",
      "type":"Organization",
      "site_admin":false
    },
    "html_url":"https://github.com/gradle/gradle",
    "description":"Adaptable, fast automation for all",
    "fork":false,
    "url":"https://api.github.com/repos/gradle/gradle",
    "forks_url":"https://api.github.com/repos/gradle/gradle/forks",
    "keys_url":"https://api.github.com/repos/gradle/gradle/keys{/key_id}",
    "collaborators_url":"https://api.github.com/repos/gradle/gradle/collaborators{/collaborator}",
    "teams_url":"https://api.github.com/repos/gradle/gradle/teams",
    "hooks_url":"https://api.github.com/repos/gradle/gradle/hooks",
    "issue_events_url":"https://api.github.com/repos/gradle/gradle/issues/events{/number}",
    "events_url":"https://api.github.com/repos/gradle/gradle/events",
    "assignees_url":"https://api.github.com/repos/gradle/gradle/assignees{/user}",
    "branches_url":"https://api.github.com/repos/gradle/gradle/branches{/branch}",
    "tags_url":"https://api.github.com/repos/gradle/gradle/tags",
    "blobs_url":"https://api.github.com/repos/gradle/gradle/git/blobs{/sha}",
    "git_tags_url":"https://api.github.com/repos/gradle/gradle/git/tags{/sha}",
    "git_refs_url":"https://api.github.com/repos/gradle/gradle/git/refs{/sha}",
    "trees_url":"https://api.github.com/repos/gradle/gradle/git/trees{/sha}",
    "statuses_url":"https://api.github.com/repos/gradle/gradle/statuses/{sha}",
    "languages_url":"https://api.github.com/repos/gradle/gradle/languages",
    "stargazers_url":"https://api.github.com/repos/gradle/gradle/stargazers",
    "contributors_url":"https://api.github.com/repos/gradle/gradle/contributors",
    "subscribers_url":"https://api.github.com/repos/gradle/gradle/subscribers",
    "subscription_url":"https://api.github.com/repos/gradle/gradle/subscription",
    "commits_url":"https://api.github.com/repos/gradle/gradle/commits{/sha}",
    "git_commits_url":"https://api.github.com/repos/gradle/gradle/git/commits{/sha}",
    "comments_url":"https://api.github.com/repos/gradle/gradle/comments{/number}",
    "issue_comment_url":"https://api.github.com/repos/gradle/gradle/issues/comments{/number}",
    "contents_url":"https://api.github.com/repos/gradle/gradle/contents/{+path}",
    "compare_url":"https://api.github.com/repos/gradle/gradle/compare/{base}...{head}",
    "merges_url":"https://api.github.com/repos/gradle/gradle/merges",
    "archive_url":"https://api.github.com/repos/gradle/gradle/{archive_format}{/ref}",
    "downloads_url":"https://api.github.com/repos/gradle/gradle/downloads",
    "issues_url":"https://api.github.com/repos/gradle/gradle/issues{/number}",
    "pulls_url":"https://api.github.com/repos/gradle/gradle/pulls{/number}",
    "milestones_url":"https://api.github.com/repos/gradle/gradle/milestones{/number}",
    "notifications_url":"https://api.github.com/repos/gradle/gradle/notifications{?since,all,participating}",
    "labels_url":"https://api.github.com/repos/gradle/gradle/labels{/name}",
    "releases_url":"https://api.github.com/repos/gradle/gradle/releases{/id}",
    "deployments_url":"https://api.github.com/repos/gradle/gradle/deployments",
    "created_at":"2009-09-09T18:27:19Z",
    "updated_at":"2020-03-31T04:09:46Z",
    "pushed_at":"2020-03-31T06:07:08Z",
    "git_url":"git://github.com/gradle/gradle.git",
    "ssh_url":"git@github.com:gradle/gradle.git",
    "clone_url":"https://github.com/gradle/gradle.git",
    "svn_url":"https://github.com/gradle/gradle",
    "homepage":"https://gradle.org",
    "size":321513,
    "stargazers_count":10309,
    "watchers_count":10309,
    "language":"Groovy",
    "has_issues":true,
    "has_projects":true,
    "has_downloads":false,
    "has_wiki":false,
    "has_pages":false,
    "forks_count":3038,
    "mirror_url":null,
    "archived":false,
    "disabled":false,
    "open_issues_count":2309,
    "license":{
      "key":"apache-2.0",
      "name":"Apache License 2.0",
      "spdx_id":"Apache-2.0",
      "url":"https://api.github.com/licenses/apache-2.0",
      "node_id":"MDc6TGljZW5zZTI="
    },
    "forks":3038,
    "open_issues":2309,
    "watchers":10309,
    "default_branch":"master"
  },
  "organization":{
    "login":"gradle",
    "id":124156,
    "node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNDE1Ng==",
    "url":"https://api.github.com/orgs/gradle",
    "repos_url":"https://api.github.com/orgs/gradle/repos",
    "events_url":"https://api.github.com/orgs/gradle/events",
    "hooks_url":"https://api.github.com/orgs/gradle/hooks",
    "issues_url":"https://api.github.com/orgs/gradle/issues",
    "members_url":"https://api.github.com/orgs/gradle/members{/member}",
    "public_members_url":"https://api.github.com/orgs/gradle/public_members{/member}",
    "avatar_url":"https://avatars2.githubusercontent.com/u/124156?v=4",
    "description":""
  },
  "sender":{
    "login":"pun-ky",
    "id":10673561,
    "node_id":"MDQ6VXNlcjEwNjczNTYx",
    "avatar_url":"https://avatars0.githubusercontent.com/u/10673561?v=4",
    "gravatar_id":"",
    "url":"https://api.github.com/users/pun-ky",
    "html_url":"https://github.com/pun-ky",
    "followers_url":"https://api.github.com/users/pun-ky/followers",
    "following_url":"https://api.github.com/users/pun-ky/following{/other_user}",
    "gists_url":"https://api.github.com/users/pun-ky/gists{/gist_id}",
    "starred_url":"https://api.github.com/users/pun-ky/starred{/owner}{/repo}",
    "subscriptions_url":"https://api.github.com/users/pun-ky/subscriptions",
    "organizations_url":"https://api.github.com/users/pun-ky/orgs",
    "repos_url":"https://api.github.com/users/pun-ky/repos",
    "events_url":"https://api.github.com/users/pun-ky/events{/privacy}",
    "received_events_url":"https://api.github.com/users/pun-ky/received_events",
    "type":"User",
    "site_admin":false
  }
}